# StatusMonitor

![Version](https://img.shields.io/badge/version-2.0.0-blue.svg)
![License](https://img.shields.io/badge/license-MIT-blue.svg)
![C++](https://img.shields.io/badge/C%2B%2B-17-blue.svg)
![CMake](https://img.shields.io/badge/CMake-3.10+-blue.svg)

StatusMonitor - —ç—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã Linux. –û–Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏, —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–∏–æ–¥–∞ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–ø–æ—Å–æ–±–∞ –∏—Ö –≤—ã–≤–æ–¥–∞. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –±–µ–∑ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (–≤—Å–µ—Ö —è–¥–µ—Ä –∏–ª–∏ –≤—ã–±–æ—Ä–æ—á–Ω–æ)
- üíæ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏
- ‚öôÔ∏è –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ JSON —Ñ–∞–π–ª
- üìù –í—ã–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Å–æ–ª—å –∏/–∏–ª–∏ —Ñ–∞–π–ª
- üîÑ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ø–µ—Ä–∏–æ–¥ —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫
- üõ†Ô∏è –†–∞—Å—à–∏—Ä—è–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫
- üì¶ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Docker –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- üîå –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ç—Ä–∏–∫ —á–µ—Ä–µ–∑ shared libraries

## üì∏ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

![StatusMonitor –≤ –¥–µ–π—Å—Ç–≤–∏–∏](/docs/images/screenshot.png)

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Linux OS
- CMake 3.10 –∏–ª–∏ –≤—ã—à–µ
- C++17 —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä (GCC 7+ –∏–ª–∏ Clang 5+)
- Google Test (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ nlohmann/json

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### üì• –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git clone https://github.com/FFG99/statusMonitor
cd statusMonitor
```

2. –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–±–æ—Ä–∫—É:

```bash
mkdir build
cd build
cmake ..
make
```

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JSON —Ñ–∞–π–ª –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞. –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∏ –ø—Ä–∏–º–µ—Ä –µ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è.

#### üìÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

```json
{
    "settings": {
        "period": 5
    },
    "metrics": [
        {
            "type": "cpu",
            "library": "./cpu_metric.so",
            "config": {
                "cpu_ids": [0, 1, 2, 3]
            }
        },
        {
            "type": "memory",
            "library": "./memory_metric.so",
            "config": {
                "spec": ["MemTotal", "MemFree", "MemAvailable"]
            }
        }
    ],
    "outputs": [
        {
            "type": "console"
        },
        {
            "type": "file",
            "path": "metrics.log"
        }
    ]
}
```

#### ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- **settings.period**: –ü–µ—Ä–∏–æ–¥ —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (—Ü–µ–ª–æ–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ).
- **metrics**: –ú–∞—Å—Å–∏–≤ –º–µ—Ç—Ä–∏–∫ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
  - **type**: –¢–∏–ø –º–µ—Ç—Ä–∏–∫–∏ ("cpu" –∏–ª–∏ "memory").
  - **library**: –ü—É—Ç—å –∫ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –º–µ—Ç—Ä–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "./cpu_metric.so").
  - **config**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–µ—Ç—Ä–∏–∫–∏:
    - –î–ª—è CPU:
      - **cpu_ids**: –ú–∞—Å—Å–∏–≤ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ —è–¥–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
    - –î–ª—è –ø–∞–º—è—Ç–∏:
      - **spec**: –ú–∞—Å—Å–∏–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–∞–º—è—Ç–∏ –∏–∑ "/proc/meminfo" –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "MemTotal", "MemFree", "MemAvailable").
- **outputs**: –ú–∞—Å—Å–∏–≤ –≤—ã—Ö–æ–¥–æ–≤ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö.
  - **type**: –¢–∏–ø –≤—ã—Ö–æ–¥–∞ ("console" –¥–ª—è –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å, "file" –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª).
  - **path**: (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–∏–ø–∞ "file") –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –¥–ª—è –∑–∞–ø–∏—Å–∏.

#### üìù –ü–æ—à–∞–≥–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º .json** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `config.json`).
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–∏–æ–¥ —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫**:

   ```json
   "settings": {
       "period": 5
   }
   ```
3. **–î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**:

   - –î–ª—è CPU:

     ```json
     {
         "type": "cpu",
         "library": "./cpu_metric.so",
         "config": {
             "cpu_ids": [0, 1, 2, 3]
         }
     }
     ```
   - –î–ª—è –ø–∞–º—è—Ç–∏:

     ```json
     {
         "type": "memory",
         "library": "./memory_metric.so",
         "config": {
             "spec": ["MemTotal", "MemFree", "MemAvailable"]
         }
     }
     ```
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤—ã—Ö–æ–¥—ã –¥–ª—è –¥–∞–Ω–Ω—ã—Ö**:

   - –î–ª—è –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å:

     ```json
     {
         "type": "console"
     }
     ```
   - –î–ª—è –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª:

     ```json
     {
         "type": "file",
         "path": "metrics.log"
     }
     ```
5. **–û–±—ä–µ–¥–∏–Ω–∏—Ç–µ –≤—Å–µ —á–∞—Å—Ç–∏ –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª** –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ –ø—Ä–∏–º–µ—Ä–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤—ã—à–µ.

### üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã

```bash
./status_monitor /path/to/config.json
```

## üìä –ú–µ—Ç—Ä–∏–∫–∏

### üíª CPU (cpu_metric.so)

- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —è–¥–µ—Ä
- –í—ã–≤–æ–¥ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### üíæ –ü–∞–º—è—Ç—å (memory_metric.so)

- –û–±—â–∏–π –æ–±—ä–µ–º –ø–∞–º—è—Ç–∏
- –°–≤–æ–±–æ–¥–Ω–∞—è –ø–∞–º—è—Ç—å
- –î–æ—Å—Ç—É–ø–Ω–∞—è –ø–∞–º—è—Ç—å
- –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ú–ë

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫

### üìù –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–µ—Ç—Ä–∏–∫–∏

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/metrics/` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `NewMetric.cpp`)
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–µ—Ç—Ä–∏–∫–∏
3. –î–æ–±–∞–≤—å—Ç–µ —Å–±–æ—Ä–∫—É –≤ CMakeLists.txt:

```cmake
add_library(new_metric SHARED
    src/metrics/NewMetric.cpp
)
target_include_directories(new_metric PUBLIC include)
target_link_libraries(new_metric PUBLIC nlohmann_json::nlohmann_json)
set_target_properties(new_metric PROPERTIES
    PREFIX ""
    OUTPUT_NAME "new_metric"
)
```

4. –°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç:

```bash
cd build
cmake ..
make
```

–ù–æ–≤–∞—è –º–µ—Ç—Ä–∏–∫–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –∫–∞–∫ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `new_metric.so`.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### üöÄ –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
cd build
make metrics_test outputs_test
ctest
```

### üìä –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –º–µ—Ç—Ä–∏–∫

```bash
cd build
make metrics_test
./metrics_test
```

### üìù –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤—ã—Ö–æ–¥–æ–≤

```bash
cd build
make outputs_test
./outputs_test
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
statusMonitor/
‚îú‚îÄ‚îÄ include/
‚îÇ   ‚îú‚îÄ‚îÄ metrics/     # –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ output/      # –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –≤—ã–≤–æ–¥–∞
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ metrics/     # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏)
‚îÇ   ‚îî‚îÄ‚îÄ output/      # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–≤–æ–¥–æ–≤
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ metrics/     # –¢–µ—Å—Ç—ã –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ output/      # –¢–µ—Å—Ç—ã –≤—ã–≤–æ–¥–æ–≤
‚îú‚îÄ‚îÄ configs/         # –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ CMakeLists.txt
‚îî‚îÄ‚îÄ README.md
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ —Ñ–∞–π–ª–µ [LICENSE](LICENSE).
